/* -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- */
/* Imports */
/* -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- */
import { useRouter } from "next/router";
import { useEffect, useState } from "react";
/* -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- */
/* Components */
/* -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- */
import Loaders from "../components/loaders/loaders";
/* -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- */
/* Styles */
/* -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- */
import TransitionStyles from "../public/stylesheets/layout/Transition.module.css";
/* -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- */
/* Transition */
/* -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- */
const Transition = (transitionProps: any) => {
    const router = useRouter();
    const { children } = transitionProps;
    const [ loading, setLoading ] = useState(false);
    const [ loaded, setLoaded ] = useState(true);
    const handleStartTransition = () => {
        setLoading(true);
        setLoaded(false);
    };
    const handleCompleteTransition = () => {
        setLoading(false);
        setLoaded(true);
    };
    useEffect(() => {
        router.events.on("routeChangeStart", handleStartTransition);
        router.events.on("routeChangeComplete", handleCompleteTransition);
        router.events.on("routeChangeError", handleCompleteTransition);
        return () => {
            router.events.off("routeChangeStart", handleStartTransition);
            router.events.off("routeChangeComplete", handleCompleteTransition);
            router.events.off("routeChangeError", handleCompleteTransition);
        };
    }, [ router ]);
    return <div className={ TransitionStyles.container } data-page-loaded={ loaded }>
        { (loading) ? <Loaders { ...transitionProps } version={ 1 }/> : children }
    </div>;
};
/* -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- */
/* Exports */
/* -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- */
export default Transition;